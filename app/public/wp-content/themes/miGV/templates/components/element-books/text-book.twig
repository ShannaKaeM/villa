{#
  Text Element Component - Atomic Design System
  Composes typography, color, and spacing primitives
  
  Usage:
  {% include 'components/element-books/text-book.twig' with {
    'type': 'title',
    'size': 'large',
    'weight': 'bold',
    'color': 'primary',
    'content': 'Hello World',
    'element': 'h2'
  } %}
#}

{% set type = type|default('body') %}
{% set size = size|default('medium') %}
{% set weight = weight|default('regular') %}
{% set color = color|default('base') %}
{% set transform = transform|default('normal') %}
{% set spacing = spacing|default('normal') %}
{% set element = element|default('span') %}
{% set class = class|default('') %}
{% set attributes = attributes|default('') %}
{% set content = content|default('') %}

{# Predefined text type configurations #}
{% set type_configs = {
    'pretitle': {
        'size': 'small',
        'weight': 'medium',
        'transform': 'uppercase',
        'spacing': 'wider',
        'color': 'primary'
    },
    'title': {
        'size': 'x-large',
        'weight': 'bold'
    },
    'subtitle': {
        'size': 'large',
        'weight': 'semiBold'
    },
    'section-title': {
        'size': 'xx-large',
        'weight': 'bold'
    },
    'body': {
        'size': 'medium'
    },
    'caption': {
        'size': 'small',
        'color': 'neutral'
    },
    'button': {
        'weight': 'medium'
    }
} %}

{# Get configuration for the text type #}
{% set config = type_configs[type]|default({}) %}

{# Override defaults with type-specific config, then with explicit parameters #}
{% set final_size = size != 'medium' ? size : (config.size|default('medium')) %}
{% set final_weight = weight != 'regular' ? weight : (config.weight|default('regular')) %}
{% set final_color = color != 'base' ? color : (config.color|default('base')) %}
{% set final_transform = transform != 'normal' ? transform : (config.transform|default('normal')) %}
{% set final_spacing = spacing != 'normal' ? spacing : (config.spacing|default('normal')) %}

<{{ element }} 
    class="villa-text villa-text--{{ type }} villa-text--{{ final_size }}{{ class ? ' ' ~ class : '' }}"
    style="
        {% include 'components/primitive-books/typography.twig' with {
            'font_size': final_size,
            'font_weight': final_weight,
            'letter_spacing': final_spacing,
            'text_transform': final_transform
        } %}
        {% include 'components/primitive-books/color.twig' with {
            'color': final_color,
            'property': 'color'
        } %}
    "
    {{ attributes|raw }}
>
    {{ content|raw }}
</{{ element }}>
